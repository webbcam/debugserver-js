.. _server:

Server commands are sent over a socket connected to the Debug Server port
(received or specified when :ref:`launching the debug server <started:launch>`)

.. contents:: Command List:
    :local:
    :backlinks: top

----

setTimeout
----------

Sets the timeout (how long to wait for a DS command to complete)

+----------------+---------------+----------------------------------+
| **Request**                                                       |
+================+===============+==================================+
| **Key**        | **Value**     | **Description**                  |
+----------------+---------------+----------------------------------+
| "name"         | "setTimeout"  | \-                               |
+----------------+---------------+----------------------------------+
| "args"         | "timeout"     | Value to set timeout to          |
+----------------+---------------+----------------------------------+

.. code-block:: javascript

    //  Request
    {
        "name": "setTimeout",
        "args": {
            "timeout": 300
        }
    }

getTimeout
----------

Gets the timeout (how long to wait for a DS command to complete)

+----------------+---------------+----------------------------------+
| **Request**                                                       |
+================+===============+==================================+
| **Key**        | **Value**     | **Description**                  |
+----------------+---------------+----------------------------------+
| "name"         | "getTimeout"  | \-                               |
+----------------+---------------+----------------------------------+
| "args"         | \-            | \-                               |
+----------------+---------------+----------------------------------+

.. code-block:: javascript

    //  Request
    {
        "name": "getTimeout",
    }

    //  Response
    {
        "status": "OK",
        "data": -1,
    }

setConsoleLevel
---------------

Sets the console output level

+----------------+-------------------------+----------------------------------+
| **Request**                                                                 |
+================+=========================+==================================+
| **Key**        | **Value**               | **Description**                  |
+----------------+-------------------------+----------------------------------+
| "name"         | "setConsoleLevel"       | \-                               |
+----------------+-------------------------+----------------------------------+
| "args"         | "level"                 | Log level to set console output: |
|                |                         |                                  |
|                |                         |    - "ALL"                       |
|                |                         |    - "CONFIG"                    |
|                |                         |    - "FINE"                      |
|                |                         |    - "FINER"                     |
|                |                         |    - "FINEST"                    |
|                |                         |    - "INFO"                      |
|                |                         |    - "SEVERE"                    |
|                |                         |    - "WARNING"                   |
|                |                         |    - "OFF"                       |
+----------------+-------------------------+----------------------------------+

.. code-block:: javascript

    //  Request
    {
        "name": "setConsoleLevel",
        "args": {
            "level": "ALL"
        }
    }

setConfig
---------

Sets the ccxml file for the DebugServer to use

+----------------+---------------+----------------------------------+
| **Request**                                                       |
+================+===============+==================================+
| **Key**        | **Value**     | **Description**                  |
+----------------+---------------+----------------------------------+
| "name"         | "setConfig"   | \-                               |
+----------------+---------------+----------------------------------+
| "args"         | "path"        | Full path to .ccxml file to use  |
+----------------+---------------+----------------------------------+

.. code-block:: javascript

    //  Request
    {
        "name": "setConfig",
        "args": {
            "path": "/path/to/config.ccxml"
        }
    }

getConfig
---------

Returns the ccxml file the DebugServer is using

+----------------+---------------+----------------------------------+
| **Request**                                                       |
+================+===============+==================================+
| **Key**        | **Value**     | **Description**                  |
+----------------+---------------+----------------------------------+
| "name"         | "getConfig"   | \-                               |
+----------------+---------------+----------------------------------+
| "args"         | \-            | \-                               |
+----------------+---------------+----------------------------------+

.. code-block:: javascript

    //  Request
    {
        "name": "getConfig",
    }

+----------------+------------------------+----------------------------------+
| **Response**                                                               |
+================+========================+==================================+
| **Key**        | **Value**              | **Description**                  |
+----------------+------------------------+----------------------------------+
| "state"        | String                 | "OK" or "FAIL"                   |
+----------------+------------------------+----------------------------------+
| "data"         | String                 | Path to ccxml file               |
+----------------+------------------------+----------------------------------+

.. code-block:: javascript

    // Response
    {
        "state": "OK",
        "data": "/path/to/config.ccxml"
    }

createConfig
------------

Creates a ccxml configuration file

+----------------+--------------------+-----------------------------------------+
| **Request**                                                                   |
+================+====================+=========================================+
| **Key**        | **Value**          | **Description**                         |
+----------------+--------------------+-----------------------------------------+
| "name"         | "createConfig"     | \-                                      |
+----------------+--------------------+-----------------------------------------+
| "args"         | "name"             | Name of of ccxml file to create         |
|                +--------------------+-----------------------------------------+
|                | "connection"       | Connection name to use                  |
|                +--------------------+-----------------------------------------+
|                | "device"           | Devicetype to use (optional)            |
|                +--------------------+-----------------------------------------+
|                | "board"            | Board to use (optional)                 |
|                +--------------------+-----------------------------------------+
|                | "directory"        | Directory to place ccxml (optional)     |
+----------------+--------------------+-----------------------------------------+

.. code-block:: javascript

    //  Request
    {
        "name": "createConfig",
        "args": {
            "name": "config.ccxml",
            "connection": "Texas Instruments XDS110 USB Debug Probe",
            "device": "CC1350F128",
            "directory": "/home/user/ti/CCSTargetConfigurations"
        }
    }

+----------------+------------------------+----------------------------------+
| **Response**                                                               |
+================+========================+==================================+
| **Key**        | **Value**              | **Description**                  |
+----------------+------------------------+----------------------------------+
| "state"        | String                 | "OK" or "FAIL"                   |
+----------------+------------------------+----------------------------------+
| "data"         | JSON object            | JSON object containing name of   |
|                |                        | ccxml file and directory         |
+----------------+------------------------+----------------------------------+

.. code-block:: javascript

    // Response
    {
        "state": "OK",
        "data": {
            "name": "config.ccxml",
            "directory": "/home/user/ti/CCSTargetConfigurations"
        }
    }

getListOfCPUs
-------------

Returns a list of CPU names which can be used for starting a session.

+----------------+------------------------+----------------------------------+
| **Request**                                                                |
+================+========================+==================================+
| **Key**        | **Value**              | **Description**                  |
+----------------+------------------------+----------------------------------+
| "name"         | "getListOfCPUs"        | \-                               |
+----------------+------------------------+----------------------------------+
| "args"         | \-                     | \-                               |
+----------------+------------------------+----------------------------------+

.. code-block:: javascript

    //  Request
    {
        "name": "getListOfCPUs",
    }

+----------------+------------------------+----------------------------------+
| **Response**                                                               |
+================+========================+==================================+
| **Key**        | **Value**              | **Description**                  |
+----------------+------------------------+----------------------------------+
| "state"        | String                 | "OK" or "FAIL"                   |
+----------------+------------------------+----------------------------------+
| "data"         | Array                  | List of CPU names                |
+----------------+------------------------+----------------------------------+

.. code-block:: javascript

    // Response
    {
        "state": "OK",
        "data": ["Cortex_M3", "Cortex_M0"]
    }

getListOfDevices
----------------

Returns a list of device names which can be used for creating ccxml files.

+----------------+------------------------+----------------------------------+
| **Request**                                                                |
+================+========================+==================================+
| **Key**        | **Value**              | **Description**                  |
+----------------+------------------------+----------------------------------+
| "name"         | "getListOfDevices"     | \-                               |
+----------------+------------------------+----------------------------------+
| "args"         | \-                     | \-                               |
+----------------+------------------------+----------------------------------+

.. code-block:: javascript

    //  Request
    {
        "name": "getListOfDevices"
    }

+----------------+------------------------+----------------------------------+
| **Response**                                                               |
+================+========================+==================================+
| **Key**        | **Value**              | **Description**                  |
+----------------+------------------------+----------------------------------+
| "state"        | String                 | "OK" or "FAIL"                   |
+----------------+------------------------+----------------------------------+
| "data"         | Array                  | List of Device names             |
+----------------+------------------------+----------------------------------+

.. code-block:: javascript

    // Response
    {
        "state": "OK",
        "data": ["CC1310F128", "CC1350F128"]
    }

getListOfConnections
--------------------

Returns a list of connection names which can be used for creating ccxml files.

+----------------+------------------------+----------------------------------+
| **Request**                                                                |
+================+========================+==================================+
| **Key**        | **Value**              | **Description**                  |
+----------------+------------------------+----------------------------------+
| "name"         | "getListOfConnections" | \-                               |
+----------------+------------------------+----------------------------------+
| "args"         | \-                     | \-                               |
+----------------+------------------------+----------------------------------+

.. code-block:: javascript

    //  Request
    {
        "name": "getListOfConnections"
    }

+----------------+------------------------+----------------------------------+
| **Response**                                                               |
+================+========================+==================================+
| **Key**        | **Value**              | **Description**                  |
+----------------+------------------------+----------------------------------+
| "state"        | String                 | "OK" or "FAIL"                   |
+----------------+------------------------+----------------------------------+
| "data"         | Array                  | List of Connection names         |
+----------------+------------------------+----------------------------------+

.. code-block:: javascript

    // Response
    {
        "state": "OK",
        "data": ["Texas Instruments XDS110 USB Debug Probe", "TI MSP430 USB1"]
    }

getListOfConfigurations
-----------------------

Returns a list of configuration (ccxml) file names.

+----------------+--------------------------------+----------------------------------+
| **Request**                                                                        |
+================+================================+==================================+
| **Key**        | **Value**                      | **Description**                  |
+----------------+--------------------------------+----------------------------------+
| "name"         | "getListOfConfigurations"      | \-                               |
+----------------+--------------------------------+----------------------------------+
| "args"         | \-                             | \-                               |
+----------------+--------------------------------+----------------------------------+

.. code-block:: javascript

    //  Request
    {
        "name": "getListOfConfigurations",
    }

+----------------+------------------------+----------------------------------+
| **Response**                                                               |
+================+========================+==================================+
| **Key**        | **Value**              | **Description**                  |
+----------------+------------------------+----------------------------------+
| "state"        | String                 | "OK" or "FAIL"                   |
+----------------+------------------------+----------------------------------+
| "data"         | Array                  | List of configuration files      |
+----------------+------------------------+----------------------------------+

.. code-block:: javascript

    // Response
    {
        "state": "OK",
        "data": ["L2000FF.ccxml", "L4000XX.ccxml"]
    }

openSession
-----------

Opens a session for the given CPU

+----------------+------------------------+--------------------------------------+
| **Request**                                                                    |
+================+========================+======================================+
| **Key**        | **Value**              | **Description**                      |
+----------------+------------------------+--------------------------------------+
| "name"         | "openSession"          | \-                                   |
+----------------+------------------------+--------------------------------------+
| "args"         | "name"                 | CPU to open session with             |
+----------------+------------------------+--------------------------------------+

.. code-block:: javascript

    //  Request
    {
        "name": "openSession",
        "args": {
            "name": "*/Cortex_M3*"
        }
    }

+----------------+--------------------+----------------------------------+
| **Response**                                                           |
+================+====================+==================================+
| **Key**        | **Value**          | **Description**                  |
+----------------+--------------------+----------------------------------+
| "state"        | String             | "OK" or "FAIL"                   |
+----------------+--------------------+----------------------------------+
| "data"         | Integer            | Port number session opened on    |
+----------------+--------------------+----------------------------------+

.. code-block:: javascript

    // Response
    {
        "state": "OK",
        "data": 4444
    }

getListOfSessions
-----------------

Returns a list of open sessions running on the DebugServer

+----------------+------------------------+----------------------------------+
| **Request**                                                                |
+================+========================+==================================+
| **Key**        | **Value**              | **Description**                  |
+----------------+------------------------+----------------------------------+
| "name"         | "getListOfSessions"    | \-                               |
+----------------+------------------------+----------------------------------+
| "args"         | \-                     | \-                               |
+----------------+------------------------+----------------------------------+

.. code-block:: javascript

    //  Request
    {
        "name": "getListOfSessions"
    }

+----------------+-------------------------------+----------------------------------+
| **Response**                                                                      |
+================+===============================+==================================+
| **Key**        | **Value**                     | **Description**                  |
+----------------+-------------------------------+----------------------------------+
| "state"        | String                        | "OK" or "FAIL"                   |
+----------------+-------------------------------+----------------------------------+
| "data"         | Array of JSON objects         | List of JSON objects             |
|                |                               | containing open session names    |
|                |                               | and their port number            |
+----------------+-------------------------------+----------------------------------+

.. code-block:: javascript

    // Response
    {
        "state": "OK",
        "data": [{
            "name": "Texas Instruments XDS110 USB Debug Probe/Cortex_M3",
            "port": 4445
        }, {
            "name": "Texas Instruments XDS110 USB Debug Probe/IcePick_M0",
            "port": 4446
        }]
    }

terminateSession
----------------

Terminates the specified session.

.. warning::
    The session's socket should be closed by the client before terminating the
    session to avoid deadlock.


+----------------+--------------------+----------------------------------+
| **Request**                                                            |
+================+====================+==================================+
| **Key**        | **Value**          | **Description**                  |
+----------------+--------------------+----------------------------------+
| "name"         | "terminateSession" | \-                               |
+----------------+--------------------+----------------------------------+
| "args"         | "name"             | Name of session to terminate     |
+----------------+--------------------+----------------------------------+

.. code-block:: javascript

    //  Request
    {
        "name": "terminateSession",
        "args": {
            "name": "Texas Instruments XDS110 USB Debug Probe/Cortex_M3"
        }
    }

killServer
----------

Terminates all open sessions and shuts the Debug Server down.

.. warning::
    All open session sockets should be closed before killing the server
    to avoid deadlock.


+----------------+--------------------+----------------------------------+
| **Request**                                                            |
+================+====================+==================================+
| **Key**        | **Value**          | **Description**                  |
+----------------+--------------------+----------------------------------+
| "name"         | "killServer"       | \-                               |
+----------------+--------------------+----------------------------------+
| "args"         | \-                 | \-                               |
+----------------+--------------------+----------------------------------+

.. code-block:: javascript

    //  Request
    {
        "name": "killServer"
    }

